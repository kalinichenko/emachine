function playNext(){isInterval=!0;var e=1.25*howls[idx]._duration*1e3;setTimeout(function(){repeat>=2?(idx++,repeat=0):repeat++,idx==howls.length&&(idx=0),isInterval&&(play(),isInterval=!1)},e>minInterval?e:minInterval)}function play(){$sentenceEng.innerHTML=howls[idx].sentenceEng,$sentenceRus.innerHTML=howls[idx].sentenceRus,howls[idx].play()}function pause(){isInterval?isInterval=!1:howls[idx].pause()}function onDelete(e){e.target.removeEventListener("click");for(var n=e.target.parentNode.parentNode,t=0;t<howls.length;t++)if(howls[t].id==n.id)return howls.splice(t,1),n.remove(),void 0}function onPlay(){play(),$playCtrlBtn.removeEventListener("click",onPlay),$playCtrlBtn.className="pause-button",$playCtrlBtn.addEventListener("click",onPause),$playListPanel.style.display="none",$playListBtn.style.display="inline-block",$sentencePanel.style.display="block"}function onPause(){pause(),$playCtrlBtn.removeEventListener("click",onPause),$playCtrlBtn.className="play-button",$playCtrlBtn.addEventListener("click",onPlay)}function onSearch(){howls=[];var e=document.getElementById("keyword").value;if(e){var n="sentences?like="+e,t=new XMLHttpRequest;t.open("GET",n,!0),t.responseType="json",t.onload=function(){for(var e=document.getElementById("play-list-table").children[0];e.firstChild;)e.removeChild(e.firstChild);for(var n=0;n<t.response.length;n++){var l=new Howl({urls:["audio/"+t.response[n].id+".mp3"],onend:playNext});l.id=t.response[n].id,l.sentenceRus=t.response[n].sentence_rus,l.sentenceEng=t.response[n].sentence_eng,howls.push(l);var s=document.createElement("tr");s.id=t.response[n].id;var a=document.createElement("td");a.appendChild(document.createTextNode(t.response[n].sentence_eng)),s.appendChild(a);var i=document.createElement("td");s.appendChild(i);var o=document.createElement("a");o.className="delete-item",o.addEventListener("click",onDelete),i.appendChild(o),e.appendChild(s)}$playCtrlBtn.style.display=t.response.length>0?"inline-block":"none"},t.onerror=function(){alert("load error")},t.send()}}function onHidePlayList(){var e=document.getElementById("play-list-panel");"none"===window.getComputedStyle(e).display?(e.style.display="block",$playListBtn.style.display="none",onPause(),$sentencePanel.style.display="none"):e.style.display="none"}function onKeyPress(e){if(13==e.keyCode){{document.getElementById("keyword")}return onSearch(),!1}}var playList,howls,repeat=0,idx=0,isInterval=!1,minInterval=3e3,$playCtrlBtn,$playListBtn,$searchBtn,$playListPanel,$sentenceEng,$sentenceRus;window.onload=function(){$playCtrlBtn=document.getElementById("play-ctrl-btn"),$playCtrlBtn.addEventListener("click",onPlay),$playListBtn=document.getElementById("play-list-btn"),$playListBtn.addEventListener("click",onHidePlayList),$searchBtn=document.getElementById("search-btn"),$searchBtn.addEventListener("click",onSearch),$playListPanel=document.getElementById("play-list-panel"),$sentencePanel=document.getElementById("sentence-panel"),$sentenceEng=document.getElementById("sentence-eng"),$sentenceRus=document.getElementById("sentence-rus")};